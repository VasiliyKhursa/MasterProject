/* ***********************************************************************
**
**  Copyright (C) 2005  Christian Kranz
**
**  Siemens S65 Display Control
**
*********************************************************************** */
// file disp.c
//

#include "ls020.h"
#include "informmodels.h"


//------------------------------------------------------------------------------------------------------
// конcтанты цветов 16-бит
	uint16_t backcolor = black;    								// color of background
	uint16_t textcolor = white;

//------------------------------------------------------------------------------------------------------
// Команды инициализации.
unsigned char init_array_0[24] PROGMEM =
{	0xFD, 0xFD, 0xFD, 0xFD, 0xEF, 0x00, 0xEE, 0x04, 0x1B, 0x04, 0xFE, 0xFE,
 	0xFE, 0xFE, 0xEF, 0x90, 0x4A, 0x04, 0x7F, 0x3F, 0xEE, 0x04, 0x43, 0x06
};

unsigned char init_array_1[46] PROGMEM =
{	0xEF, 0x90, 0x09, 0x83, 0x08, 0x00, 0x0B, 0xAF,
 	0x0A, 0x00, 0x05, 0x00, 0x06, 0x00, 0x07, 0x00, 
 	0xEF, 0x00, 0xEE, 0x0C, 0xEF, 0x90, 0x00, 0x80, 
 	0xEF, 0xB0, 0x49, 0x02, 0xEF, 0x00, 0x7F, 0x01,
 	0xE1, 0x81, 0xE2, 0x02, 0xE2, 0x76, 0xE1, 0x83,
 	0x80, 0x01, 0xEF, 0x90, 0x00, 0x00
};


//------------------------------------------------------------------------------------------------------
// Таблица црифтов для кодировки ASCII символов. Полная таблица символов 256 шт.
// ширина шрифта 6
// высота шрифта 8
unsigned char font6x8[1536] PROGMEM =
{	0x00,0x00,0x00,0x00,0x00,0x00, 		// Symbol 00
 	0x00,0x00,0x00,0x5F,0x00,0x00, 		// Symbol 01
 	0x00,0x00,0x03,0x00,0x03,0x00, 		// Symbol 02
 	0x22,0x7F,0x22,0x22,0x7F,0x22, 		// Symbol 03
 	0x00,0x24,0x2A,0x6B,0x2A,0x12, 		// Symbol 04
 	0x00,0x23,0x13,0x08,0x64,0x62, 		// Symbol 05
 	0x00,0x3A,0x45,0x45,0x3A,0x28, 		// Symbol 06
 	0x00,0x00,0x00,0x02,0x01,0x00, 		// Symbol 07
 	0x00,0x00,0x3E,0x41,0x00,0x00, 		// Symbol 08
 	0x00,0x00,0x41,0x3E,0x00,0x00, 		// Symbol 09
 	0x00,0x2A,0x1C,0x1C,0x2A,0x00, 		// Symbol 0A
 	0x00,0x08,0x08,0x3E,0x08,0x08, 		// Symbol 0B
 	0x00,0x00,0x80,0x40,0x00,0x00, 		// Symbol 0C
 	0x00,0x08,0x08,0x08,0x08,0x00, 		// Symbol 0D
 	0x00,0x00,0x00,0x40,0x00,0x00, 		// Symbol 0E
 	0x00,0x20,0x10,0x08,0x04,0x02, 		// Symbol 0F
 	0x00,0x3E,0x51,0x49,0x45,0x3E, 		// Symbol 10		0
 	0x00,0x00,0x42,0x7F,0x40,0x00, 		// Symbol 11		1
 	0x00,0x62,0x51,0x51,0x51,0x4E, 		// Symbol 12		2
 	0x00,0x21,0x41,0x45,0x45,0x3B, 		// Symbol 13		3
 	0x00,0x18,0x16,0x11,0x7F,0x10, 		// Symbol 14		4
 	0x00,0x27,0x45,0x45,0x45,0x39, 		// Symbol 15		5
 	0x00,0x3E,0x49,0x49,0x49,0x32, 		// Symbol 16		6
 	0x00,0x01,0x61,0x11,0x09,0x07, 		// Symbol 17		7
 	0x00,0x36,0x49,0x49,0x49,0x36, 		// Symbol 18		8
 	0x00,0x26,0x49,0x49,0x49,0x3E, 		// Symbol 19		9
 	0x00,0x00,0x00,0x12,0x00,0x00, 		// Symbol 1A		
 	0x00,0x00,0x20,0x12,0x00,0x00, 		// Symbol 1B
 	0x00,0x08,0x14,0x22,0x41,0x00, 		// Symbol 1C
 	0x00,0x14,0x14,0x14,0x14,0x14, 		// Symbol 1D
 	0x00,0x41,0x22,0x14,0x08,0x00, 		// Symbol 1E
 	0x00,0x06,0x01,0x51,0x09,0x06, 		// Symbol 1F
 	0x00,0x00,0x00,0x00,0x00,0x00, 		// Symbol 20
 	0x00,0x00,0x00,0x5F,0x00,0x00, 		// Symbol 21
 	0x00,0x00,0x03,0x00,0x03,0x00, 		// Symbol 22
 	0x22,0x7F,0x22,0x22,0x7F,0x22, 		// Symbol 23
 	0x00,0x24,0x2A,0x6B,0x2A,0x12, 		// Symbol 24
 	0x00,0x23,0x13,0x08,0x64,0x62, 		// Symbol 25
 	0x00,0x3A,0x45,0x45,0x3A,0x28, 		// Symbol 26
 	0x00,0x00,0x00,0x02,0x01,0x00, 		// Symbol 27
 	0x00,0x00,0x3E,0x41,0x00,0x00, 		// Symbol 28
 	0x00,0x00,0x41,0x3E,0x00,0x00, 		// Symbol 29
 	0x00,0x2A,0x1C,0x1C,0x2A,0x00, 		// Symbol 2A
 	0x00,0x08,0x08,0x3E,0x08,0x08, 		// Symbol 2B
 	0x00,0x00,0x80,0x40,0x00,0x00, 		// Symbol 2C
 	0x00,0x08,0x08,0x08,0x08,0x00, 		// Symbol 2D
 	0x00,0x00,0x00,0x40,0x00,0x00, 		// Symbol 2E
 	0x00,0x20,0x10,0x08,0x04,0x02, 		// Symbol 2F
 	0x00,0x3E,0x51,0x49,0x45,0x3E, 		// Symbol 30		0
 	0x00,0x00,0x42,0x7F,0x40,0x00, 		// Symbol 31		1
 	0x00,0x62,0x51,0x51,0x51,0x4E, 		// Symbol 32		2
 	0x00,0x21,0x41,0x45,0x45,0x3B, 		// Symbol 33		3
 	0x00,0x18,0x16,0x11,0x7F,0x10, 		// Symbol 34		4
 	0x00,0x27,0x45,0x45,0x45,0x39, 		// Symbol 35		5
 	0x00,0x3E,0x49,0x49,0x49,0x32, 		// Symbol 36		6
 	0x00,0x01,0x61,0x11,0x09,0x07, 		// Symbol 37		7
 	0x00,0x36,0x49,0x49,0x49,0x36, 		// Symbol 38		8
 	0x00,0x26,0x49,0x49,0x49,0x3E, 		// Symbol 39		9
 	0x00,0x00,0x00,0x12,0x00,0x00, 		// Symbol 3A		
 	0x00,0x00,0x20,0x12,0x00,0x00, 		// Symbol 3B
 	0x00,0x08,0x14,0x22,0x41,0x00, 		// Symbol 3C
 	0x00,0x14,0x14,0x14,0x14,0x14, 		// Symbol 3D
 	0x00,0x41,0x22,0x14,0x08,0x00, 		// Symbol 3E
 	0x00,0x06,0x01,0x51,0x09,0x06, 		// Symbol 3F
 	0x00,0x3E,0x41,0x4D,0x4D,0x2E, 		// Symbol 40
 	0x00,0x78,0x16,0x11,0x16,0x78, 		// Symbol 41		A
 	0x00,0x7F,0x49,0x49,0x49,0x36, 		// Symbol 42		B
 	0x00,0x3E,0x41,0x41,0x41,0x22, 		// Symbol 43		C
 	0x00,0x7F,0x41,0x41,0x41,0x3E, 		// Symbol 44		D
 	0x00,0x7F,0x49,0x49,0x49,0x41, 		// Symbol 45		E
 	0x00,0x7F,0x09,0x09,0x09,0x01, 		// Symbol 46		F
 	0x00,0x3E,0x41,0x41,0x51,0x32, 		// Symbol 47		G
 	0x00,0x7F,0x08,0x08,0x08,0x7F, 		// Symbol 48		H
 	0x00,0x00,0x41,0x7F,0x41,0x00, 		// Symbol 49		I
 	0x00,0x30,0x40,0x41,0x41,0x3F, 		// Symbol 4A		J
 	0x00,0x7F,0x08,0x08,0x14,0x63, 		// Symbol 4B		K
 	0x00,0x7F,0x40,0x40,0x40,0x60, 		// Symbol 4C		L
 	0x00,0x7F,0x04,0x18,0x04,0x7F, 		// Symbol 4D		M
 	0x00,0x7F,0x04,0x08,0x10,0x7F, 		// Symbol 4E		N
 	0x00,0x3E,0x41,0x41,0x41,0x3E, 		// Symbol 4F		O
 	0x00,0x7F,0x09,0x09,0x09,0x06, 		// Symbol 50		P
 	0x00,0x3E,0x41,0x61,0x21,0x5E, 		// Symbol 51		Q
 	0x00,0x7F,0x09,0x09,0x19,0x66, 		// Symbol 52		R
 	0x00,0x26,0x49,0x49,0x49,0x32, 		// Symbol 53		S
 	0x00,0x01,0x01,0x7F,0x01,0x01, 		// Symbol 54		T
 	0x00,0x3F,0x40,0x40,0x40,0x3F, 		// Symbol 55		U
 	0x00,0x07,0x18,0x60,0x18,0x07, 		// Symbol 56		V
 	0x00,0x1F,0x60,0x18,0x60,0x1F, 		// Symbol 57		W
 	0x00,0x63,0x14,0x08,0x14,0x63, 		// Symbol 58		X
 	0x00,0x03,0x04,0x78,0x04,0x03, 		// Symbol 59		Y
 	0x00,0x61,0x51,0x49,0x45,0x43, 		// Symbol 5A		Z
 	0x00,0x00,0x7F,0x41,0x00,0x00, 		// Symbol 5B		[
 	0x00,0x02,0x04,0x08,0x10,0x20, 		// Symbol 5C		
 	0x00,0x00,0x41,0x7F,0x00,0x00, 		// Symbol 5D		]
 	0x00,0x00,0x00,0x00,0x00,0x00, 		// Symbol 5E		^
 	0x40,0x40,0x40,0x40,0x40,0x40, 		// Symbol 5F
 	0x00,0x00,0x00,0x01,0x02,0x00, 		// Symbol 60		
 	0x00,0x20,0x54,0x54,0x54,0x78, 		// Symbol 61		a
 	0x00,0x7E,0x48,0x48,0x48,0x30, 		// Symbol 62		b
 	0x00,0x38,0x44,0x44,0x44,0x28, 		// Symbol 63		c
 	0x00,0x30,0x48,0x48,0x48,0x7E, 		// Symbol 64		d
 	0x00,0x38,0x54,0x54,0x54,0x18, 		// Symbol 65		e
 	0x00,0x10,0x7C,0x12,0x02,0x04, 		// Symbol 66		f
 	0x00,0x0C,0x52,0x52,0x3C,0x02, 		// Symbol 67		g
 	0x00,0x7E,0x08,0x08,0x08,0x70, 		// Symbol 68		h
 	0x00,0x00,0x00,0x74,0x00,0x00, 		// Symbol 69		i
 	0x00,0x40,0x80,0x80,0x74,0x00, 		// Symbol 6A		j
 	0x00,0x7E,0x10,0x10,0x10,0x6C, 		// Symbol 6B		k
 	0x00,0x00,0x02,0x7E,0x00,0x00, 		// Symbol 6C		l
 	0x00,0x7C,0x04,0x78,0x04,0x78, 		// Symbol 6D		m
 	0x00,0x7C,0x04,0x04,0x04,0x78, 		// Symbol 6E		n
 	0x00,0x38,0x44,0x44,0x44,0x38, 		// Symbol 6F		o
 	0x00,0xFC,0x24,0x24,0x24,0x18, 		// Symbol 70		p
 	0x00,0x18,0x24,0x24,0x24,0xFC, 		// Symbol 71		q
 	0x00,0x7C,0x08,0x04,0x04,0x08, 		// Symbol 72		r
 	0x00,0x48,0x54,0x54,0x54,0x20, 		// Symbol 73		s
 	0x00,0x08,0x3E,0x48,0x40,0x00, 		// Symbol 74		t
 	0x00,0x3C,0x40,0x40,0x40,0x3C, 		// Symbol 75		u
 	0x00,0x1C,0x20,0x40,0x20,0x1C, 		// Symbol 76		v
 	0x00,0x3C,0x40,0x30,0x40,0x3C, 		// Symbol 77		w
 	0x00,0x44,0x28,0x10,0x28,0x44, 		// Symbol 78		x
 	0x00,0x1C,0x20,0xA0,0xA0,0x7C, 		// Symbol 79		y		
 	0x00,0x44,0x64,0x54,0x4C,0x44, 		// Symbol 7A		z
 	0x00,0x08,0x36,0x41,0x00,0x00, 		// Symbol 7B
 	0x00,0x00,0x00,0x7F,0x00,0x00, 		// Symbol 7C
 	0x00,0x00,0x41,0x36,0x08,0x00, 		// Symbol 7D
 	0x02,0x01,0x01,0x02,0x02,0x01, 		// Symbol 7E
	0x00,0x7F,0x7F,0x7F,0x7F,0x7F, 		// Symbol 7F
 	0x00,0x00,0x00,0x00,0x00,0x00, 		// Symbol 80
 	0x00,0x00,0x00,0x5F,0x00,0x00, 		// Symbol 81
 	0x00,0x00,0x03,0x00,0x03,0x00, 		// Symbol 82
 	0x22,0x7F,0x22,0x22,0x7F,0x22, 		// Symbol 83
 	0x00,0x24,0x2A,0x6B,0x2A,0x12, 		// Symbol 84
 	0x00,0x23,0x13,0x08,0x64,0x62, 		// Symbol 85
 	0x00,0x3A,0x45,0x45,0x3A,0x28, 		// Symbol 86
 	0x00,0x00,0x00,0x02,0x01,0x00, 		// Symbol 87
 	0x00,0x00,0x3E,0x41,0x00,0x00, 		// Symbol 88
 	0x00,0x00,0x41,0x3E,0x00,0x00, 		// Symbol 89
 	0x00,0x2A,0x1C,0x1C,0x2A,0x00, 		// Symbol 8A
 	0x00,0x08,0x08,0x3E,0x08,0x08, 		// Symbol 8B
 	0x00,0x00,0x80,0x40,0x00,0x00, 		// Symbol 8C
 	0x00,0x08,0x08,0x08,0x08,0x00, 		// Symbol 8D
 	0x00,0x00,0x00,0x40,0x00,0x00, 		// Symbol 8E
 	0x00,0x20,0x10,0x08,0x04,0x02,		// Symbol 8F
 	0x00,0x3E,0x51,0x49,0x45,0x3E, 		// Symbol 90
 	0x00,0x00,0x42,0x7F,0x40,0x00, 		// Symbol 91
 	0x00,0x62,0x51,0x51,0x51,0x4E, 		// Symbol 92
 	0x00,0x21,0x41,0x45,0x45,0x3B, 		// Symbol 93
 	0x00,0x18,0x16,0x11,0x7F,0x10, 		// Symbol 94
 	0x00,0x27,0x45,0x45,0x45,0x39, 		// Symbol 95
 	0x00,0x3E,0x49,0x49,0x49,0x32, 		// Symbol 96
 	0x00,0x01,0x61,0x11,0x09,0x07, 		// Symbol 97
 	0x00,0x36,0x49,0x49,0x49,0x36, 		// Symbol 98
 	0x00,0x26,0x49,0x49,0x49,0x3E, 		// Symbol 99
 	0x00,0x00,0x00,0x12,0x00,0x00, 		// Symbol 9A
 	0x00,0x00,0x20,0x12,0x00,0x00, 		// Symbol 9B
 	0x00,0x08,0x14,0x22,0x41,0x00, 		// Symbol 9C
 	0x00,0x14,0x14,0x14,0x14,0x14, 		// Symbol 9D
 	0x00,0x41,0x22,0x14,0x08,0x00, 		// Symbol 9E
 	0x00,0x06,0x01,0x51,0x09,0x06, 		// Symbol 9F
 	0x00,0x3E,0x41,0x4D,0x4D,0x2E, 		// Symbol A0
 	0x00,0x78,0x16,0x11,0x16,0x78, 		// Symbol A1
 	0x00,0x7F,0x49,0x49,0x49,0x36, 		// Symbol A2
 	0x00,0x3E,0x41,0x41,0x41,0x22, 		// Symbol A3
 	0x00,0x7F,0x41,0x41,0x41,0x3E, 		// Symbol A4
 	0x00,0x7F,0x49,0x49,0x49,0x41, 		// Symbol A5
 	0x00,0x7F,0x09,0x09,0x09,0x01, 		// Symbol A6
 	0x00,0x3E,0x41,0x41,0x51,0x32, 		// Symbol A7
 	0x00,0x7F,0x08,0x08,0x08,0x7F, 		// Symbol A8
 	0x00,0x00,0x41,0x7F,0x41,0x00, 		// Symbol A9
 	0x00,0x30,0x40,0x41,0x41,0x3F, 		// Symbol AA
 	0x00,0x7F,0x08,0x08,0x14,0x63, 		// Symbol AB
 	0x00,0x7F,0x40,0x40,0x40,0x60, 		// Symbol AC
 	0x00,0x7F,0x04,0x18,0x04,0x7F, 		// Symbol AD
 	0x00,0x7F,0x04,0x08,0x10,0x7F, 		// Symbol AE
 	0x00,0x3E,0x41,0x41,0x41,0x3E, 		// Symbol AF
 	0x00,0x7F,0x09,0x09,0x09,0x06, 		// Symbol B0
 	0x00,0x3E,0x41,0x61,0x21,0x5E, 		// Symbol B1
 	0x00,0x7F,0x09,0x09,0x19,0x66, 		// Symbol B2
 	0x00,0x26,0x49,0x49,0x49,0x32, 		// Symbol B3
 	0x00,0x01,0x01,0x7F,0x01,0x01, 		// Symbol B4
 	0x00,0x3F,0x40,0x40,0x40,0x3F, 		// Symbol B5
 	0x00,0x07,0x18,0x60,0x18,0x07, 		// Symbol B6
 	0x00,0x1F,0x60,0x18,0x60,0x1F, 		// Symbol B7
 	0x00,0x63,0x14,0x08,0x14,0x63, 		// Symbol B8
 	0x00,0x03,0x04,0x78,0x04,0x03, 		// Symbol B9
 	0x00,0x61,0x51,0x49,0x45,0x43, 		// Symbol BA
 	0x00,0x00,0x7F,0x41,0x00,0x00, 		// Symbol BB
 	0x00,0x02,0x04,0x08,0x10,0x20, 		// Symbol BC
 	0x00,0x00,0x41,0x7F,0x00,0x00, 		// Symbol BD
 	0x00,0x00,0x00,0x00,0x00,0x00, 		// Symbol BE
 	0x40,0x40,0x40,0x40,0x40,0x40, 		// Symbol BF
 	0x00,0x78,0x16,0x11,0x16,0x78, 		// Symbol C0		A
 	0x00,0x20,0x54,0x54,0x54,0x78, 		// Symbol C1		
 	0x00,0x7F,0x49,0x49,0x49,0x36, 		// Symbol C2		B
 	0x00,0x38,0x44,0x44,0x44,0x28, 		// Symbol C3
 	0x00,0x30,0x48,0x48,0x48,0x7E, 		// Symbol C4
 	0x00,0x7F,0x49,0x49,0x49,0x41, 		// Symbol С5		E
 	0x00,0x10,0x7C,0x12,0x02,0x04, 		// Symbol C6
 	0x00,0x0C,0x52,0x52,0x3C,0x02, 		// Symbol C7
 	0x00,0x7E,0x08,0x08,0x08,0x70, 		// Symbol C8
 	0x00,0x00,0x00,0x74,0x00,0x00, 		// Symbol C9
 	0x00,0x7F,0x08,0x08,0x14,0x63, 		// Symbol CA		K!
 	0x00,0x7F,0x08,0x08,0x14,0x63, 		// Symbol CB		К
 	0x00,0x00,0x02,0x7E,0x00,0x00, 		// Symbol CC
 	0x00,0x7C,0x04,0x78,0x04,0x78, 		// Symbol CD
 	0x00,0x7C,0x04,0x04,0x04,0x78, 		// Symbol CE
 	0x00,0x38,0x44,0x44,0x44,0x38, 		// Symbol CF
 	0x00,0xFC,0x24,0x24,0x24,0x18, 		// Symbol D0
 	0x00,0x18,0x24,0x24,0x24,0xFC, 		// Symbol D1
 	0x00,0x7C,0x08,0x04,0x04,0x08, 		// Symbol D2
 	0x00,0x48,0x54,0x54,0x54,0x20, 		// Symbol D3
 	0x00,0x08,0x3E,0x48,0x40,0x00, 		// Symbol D4
 	0x00,0x3C,0x40,0x40,0x40,0x3C, 		// Symbol D5
 	0x00,0x1C,0x20,0x40,0x20,0x1C, 		// Symbol D6
 	0x00,0x3C,0x40,0x30,0x40,0x3C, 		// Symbol D7
 	0x00,0x44,0x28,0x10,0x28,0x44, 		// Symbol D8
 	0x00,0x1C,0x20,0xA0,0xA0,0x7C, 		// Symbol D9
 	0x00,0x44,0x64,0x54,0x4C,0x44, 		// Symbol DA
 	0x00,0x08,0x36,0x41,0x00,0x00, 		// Symbol DB
 	0x00,0x00,0x00,0x7F,0x00,0x00, 		// Symbol DC
 	0x00,0x00,0x41,0x36,0x08,0x00, 		// Symbol DD
 	0x02,0x01,0x01,0x02,0x02,0x01, 		// Symbol DE
 	0x00,0x7F,0x7F,0x7F,0x7F,0x7F, 		// Symbol DF
 	0x00,0x20,0x54,0x54,0x54,0x78, 		// Symbol Е0		a
 	0x00,0x20,0x54,0x54,0x54,0x78, 		// Symbol E1
 	0x00,0x7E,0x48,0x48,0x48,0x30, 		// Symbol E2
 	0x00,0x38,0x44,0x44,0x44,0x28, 		// Symbol E3
 	0x00,0x0C,0x52,0x52,0x3C,0x02, 		// Symbol E4		g
 	0x00,0x0C,0x52,0x52,0x3C,0x02, 		// Symbol E5		
 	0x00,0x10,0x7C,0x12,0x02,0x04, 		// Symbol E6
 	0x00,0x0C,0x52,0x52,0x3C,0x02, 		// Symbol E7
 	0x00,0x7E,0x08,0x08,0x08,0x70, 		// Symbol E8
 	0x00,0x00,0x00,0x74,0x00,0x00, 		// Symbol E9
 	0x00,0x40,0x80,0x80,0x74,0x00, 		// Symbol EA
 	0x00,0x7E,0x10,0x10,0x10,0x6C, 		// Symbol EB
 	0x00,0x00,0x02,0x7E,0x00,0x00, 		// Symbol EC
 	0x00,0x38,0x44,0x44,0x44,0x38, 		// Symbol ED		
 	0x00,0x38,0x44,0x44,0x44,0x38, 		// Symbol EE		o
 	0x00,0x38,0x44,0x44,0x44,0x38, 		// Symbol EF
 	0x00,0xFC,0x24,0x24,0x24,0x18, 		// Symbol F0		p
 	0x00,0xFC,0x24,0x24,0x24,0x18, 		// Symbol F1		
 	0x00,0x7C,0x08,0x04,0x04,0x08, 		// Symbol F2
 	0x00,0x48,0x54,0x54,0x54,0x20, 		// Symbol F3
 	0x00,0x08,0x3E,0x48,0x40,0x00, 		// Symbol F4
 	0x00,0x3C,0x40,0x40,0x40,0x3C, 		// Symbol F5
 	0x00,0x1C,0x20,0x40,0x20,0x1C, 		// Symbol F6
 	0x00,0x3C,0x40,0x30,0x40,0x3C, 		// Symbol F7
 	0x00,0x44,0x28,0x10,0x28,0x44, 		// Symbol F8
 	0x00,0x1C,0x20,0xA0,0xA0,0x7C, 		// Symbol F9
 	0x00,0x44,0x64,0x54,0x4C,0x44, 		// Symbol FA
 	0x00,0x08,0x36,0x41,0x00,0x00, 		// Symbol FB
 	0x00,0x00,0x00,0x7F,0x00,0x00, 		// Symbol FC
 	0x00,0x00,0x41,0x36,0x08,0x00, 		// Symbol FD
 	0x02,0x01,0x01,0x02,0x02,0x01, 		// Symbol FE
 	0x00,0x7F,0x7F,0x7F,0x7F,0x7F  		// Symbol FF
};


//------------------------------------------------------------------------------------------------------
// Таблица црифтов для кодировки ASCII символов. Неполная таблица символов - от 32го до 128го.
// ширина шрифта 8
// высота шрифта 14

unsigned char font8x14[1344] PROGMEM =
{
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 	// Symbol 20  	space (32)
0x00, 0x00, 0x00, 0x18, 0x3c, 0x3c, 0x3c, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 	// Symbol 21	!
0x00, 0x66, 0x66, 0x66, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 	// Symbol 22	"
0x00, 0x00, 0x00, 0x6c, 0x6c, 0xfe, 0x6c, 0x6c, 0x6c, 0xfe, 0x6c, 0x6c, 0x00, 0x00, 	// Symbol 23	#
0x00, 0x18, 0x18, 0x7c, 0xc6, 0xc2, 0xc0, 0x7c, 0x06, 0x86, 0xc6, 0x7c, 0x18, 0x18, 	// Symbol 24	$
0x00, 0x00, 0x00, 0x00, 0x00, 0xc2, 0xc6, 0x0c, 0x18, 0x30, 0x66, 0xc6, 0x00, 0x00, 	// Symbol 25	%
0x00, 0x00, 0x00, 0x38, 0x6c, 0x6c, 0x38, 0x76, 0xdc, 0xcc, 0xcc, 0x76, 0x00, 0x00, 	// Symbol 26	&
0x00, 0x18, 0x18, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 	// Symbol 27	'
0x00, 0x00, 0x00, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x30, 0x30, 0x18, 0x0c, 0x00, 0x00, 	// Symbol 28	(
0x00, 0x00, 0x00, 0x30, 0x18, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x18, 0x30, 0x00, 0x00, 	// Symbol 29	)
0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x3c, 0xff, 0x3c, 0x66, 0x00, 0x00, 0x00, 0x00, 	// Symbol 2A	*
0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7e, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 	// Symbol 2B	+
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0x30, 0x00, 	// Symbol 2C	ґ
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 	// Symbol 2D	-
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 	// Symbol 2E	.
0x00, 0x00, 0x00, 0x02, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0x80, 0x00, 0x00, 0x00, 	// Symbol 2F	/
0x00, 0x00, 0x00, 0x38, 0x6c, 0xc6, 0xc6, 0xd6, 0xc6, 0xc6, 0x6c, 0x38, 0x00, 0x00, 	// Symbol 30	0 (48-32)
0x00, 0x00, 0x00, 0x18, 0x38, 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7e, 0x00, 0x00, 	// Symbol 31	1
0x00, 0x00, 0x00, 0x7c, 0xc6, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc6, 0xfe, 0x00, 0x00, 	// Symbol 32	2
0x00, 0x00, 0x00, 0x7c, 0xc6, 0x06, 0x06, 0x3c, 0x06, 0x06, 0xc6, 0x7c, 0x00, 0x00, 	// Symbol 33	3
0x00, 0x00, 0x00, 0x0c, 0x1c, 0x3c, 0x6c, 0xcc, 0xfe, 0x0c, 0x0c, 0x1e, 0x00, 0x00, 	// Symbol 34	4
0x00, 0x00, 0x00, 0xfe, 0xc0, 0xc0, 0xc0, 0xfc, 0x06, 0x06, 0xc6, 0x7c, 0x00, 0x00, 	// Symbol 35	5
0x00, 0x00, 0x00, 0x38, 0x60, 0xc0, 0xc0, 0xfc, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 	// Symbol 36	6
0x00, 0x00, 0x00, 0xfe, 0xc6, 0x06, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x30, 0x00, 0x00, 	// Symbol 37	7
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0x7c, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 	// Symbol 38	8
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0x7e, 0x06, 0x06, 0x0c, 0x78, 0x00, 0x00, 	// Symbol 39	9
0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 	// Symbol 3A	
0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x30, 0x00, 0x00, 	// Symbol 3B
0x00, 0x00, 0x00, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0x60, 0x30, 0x18, 0x0c, 0x00, 0x00, 	// Symbol 3C
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 	// Symbol 3D
0x00, 0x00, 0x00, 0x60, 0x30, 0x18, 0x0c, 0x06, 0x0c, 0x18, 0x30, 0x60, 0x00, 0x00, 	// Symbol 3E
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0x0c, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 	// Symbol 3F
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xde, 0xde, 0xde, 0xdc, 0xc0, 0x7c, 0x00, 0x00, 	// Symbol 40
0x00, 0x00, 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 	// Symbol 41		A
0x00, 0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x66, 0x66, 0x66, 0xfc, 0x00, 0x00, 	// Symbol 42		B
0x00, 0x00, 0x00, 0x3c, 0x66, 0xc2, 0xc0, 0xc0, 0xc0, 0xc2, 0x66, 0x3c, 0x00, 0x00, 	// Symbol 43
0x00, 0x00, 0x00, 0xf8, 0x6c, 0x66, 0x66, 0x66, 0x66, 0x66, 0x6c, 0xf8, 0x00, 0x00, 	// Symbol 44
0x00, 0x00, 0x00, 0xfe, 0x66, 0x62, 0x68, 0x78, 0x68, 0x62, 0x66, 0xfe, 0x00, 0x00, 	// Symbol 45
0x00, 0x00, 0x00, 0xfe, 0x66, 0x62, 0x68, 0x78, 0x68, 0x60, 0x60, 0xf0, 0x00, 0x00, 	// Symbol 46
0x00, 0x00, 0x00, 0x3c, 0x66, 0xc2, 0xc0, 0xc0, 0xde, 0xc6, 0x66, 0x3a, 0x00, 0x00, 	// Symbol 47
0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xfe, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 	// Symbol 48
0x00, 0x00, 0x00, 0x3c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00, 	// Symbol 49
0x00, 0x00, 0x00, 0x1e, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0x78, 0x00, 0x00, 	// Symbol 4A
0x00, 0x00, 0x00, 0xe6, 0x66, 0x6c, 0x6c, 0x78, 0x6c, 0x6c, 0x66, 0xe6, 0x00, 0x00, 	// Symbol 4B
0x00, 0x00, 0x00, 0xf0, 0x60, 0x60, 0x60, 0x60, 0x60, 0x62, 0x66, 0xfe, 0x00, 0x00, 	// Symbol 4C
0x00, 0x00, 0x00, 0xc6, 0xee, 0xfe, 0xd6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 	// Symbol 4D
0x00, 0x00, 0x00, 0xc6, 0xe6, 0xf6, 0xfe, 0xde, 0xce, 0xc6, 0xc6, 0xc6, 0x00, 0x00, 	// Symbol 4E
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00, 	// Symbol 4F
0x00, 0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x60, 0x60, 0x60, 0xf0, 0x00, 0x00, 	// Symbol 50		P
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xd6, 0xde, 0x7c, 0x0e, 0x00,
0x00, 0x00, 0x00, 0xfc, 0x66, 0x66, 0x66, 0x7c, 0x6c, 0x66, 0x66, 0xe6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0x60, 0x38, 0x0c, 0xc6, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x7e, 0x7e, 0x5a, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00,
0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0xc6, 0x6c, 0x38, 0x10, 0x00, 0x00,
0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xd6, 0xd6, 0xfe, 0x6c, 0x6c, 0x00, 0x00,
0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0x7c, 0x38, 0x7c, 0xc6, 0xc6, 0xc6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x3c, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00,
0x00, 0x00, 0x00, 0xfe, 0xc6, 0x8c, 0x18, 0x30, 0x60, 0xc2, 0xc6, 0xfe, 0x00, 0x00,
0x00, 0x00, 0x00, 0x3c, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x80, 0xc0, 0xe0, 0x70, 0x38, 0x1c, 0x0e, 0x06, 0x02, 0x00, 0x00,
0x00, 0x00, 0x00, 0x3c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x3c, 0x00, 0x00,
0x10, 0x38, 0x6c, 0xc6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff,
0x00, 0x30, 0x18, 0x0c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0xcc, 0x76, 0x00, 0x00,
0x00, 0x00, 0x00, 0xe0, 0x60, 0x60, 0x78, 0x6c, 0x66, 0x66, 0x66, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc0, 0xc0, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x1c, 0x0c, 0x0c, 0x3c, 0x6c, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xfe, 0xc0, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x1c, 0x36, 0x32, 0x30, 0x7c, 0x30, 0x30, 0x30, 0x78, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0xcc, 0x78,
0x00, 0x00, 0x00, 0xe0, 0x60, 0x60, 0x6c, 0x76, 0x66, 0x66, 0x66, 0xe6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x06, 0x06, 0x00, 0x0e, 0x06, 0x06, 0x06, 0x06, 0x66, 0x66, 0x3c,
0x00, 0x00, 0x00, 0xe0, 0x60, 0x60, 0x66, 0x6c, 0x78, 0x6c, 0x66, 0xe6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x38, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xec, 0xfe, 0xd6, 0xd6, 0xd6, 0xd6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0xc6, 0xc6, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x66, 0x66, 0x66, 0x7c, 0x60, 0x60, 0xf0,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0x0c, 0x1e,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xdc, 0x76, 0x66, 0x60, 0x60, 0xf0, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7c, 0xc6, 0x70, 0x1c, 0xc6, 0x7c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x10, 0x30, 0x30, 0xfc, 0x30, 0x30, 0x30, 0x36, 0x1c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0x6c, 0x38, 0x10, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0xc6, 0xd6, 0xd6, 0xfe, 0x6c, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0x6c, 0x38, 0x38, 0x6c, 0xc6, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0x7e, 0x06, 0x0c, 0x78,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe, 0xcc, 0x18, 0x30, 0x66, 0xfe, 0x00, 0x00,
0x00, 0x00, 0x00, 0x0e, 0x18, 0x18, 0x18, 0x70, 0x18, 0x18, 0x18, 0x0e, 0x00, 0x00,
0x00, 0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00,
0x00, 0x00, 0x00, 0x70, 0x18, 0x18, 0x18, 0x0e, 0x18, 0x18, 0x18, 0x70, 0x00, 0x00,
0x00, 0x76, 0xdc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0x00, 0x00, 0x00
};

//------------------------------------------------------------------------------------------------------
// запись команды 8 бит
void ls020_wrcmd8(char cmd8)									// Запись команды (8бит)
{

  	LS020_PORT_RS |= (1<<LS020_RS);								// Set RS
  	LS020_PORT_CS &= ~(1<<LS020_CS); 							// select LCD											
  	SPDR = cmd8;
  	while ( !(SPSR & (1 << SPIF)));
  	LS020_PORT_CS |= (1<<LS020_CS); 							// deselect LCD

}


//------------------------------------------------------------------------------------------------------
// запись команды 16 бит
void ls020_wrcmd16(uint16_t  cmd16)								// Запись команды (16бит)
{
  	ls020_wrcmd8((cmd16 >> 8) & 0xFF);
  	ls020_wrcmd8(cmd16 & 0xFF);
}


//------------------------------------------------------------------------------------------------------
// запись данных 8 бит
void ls020_wrdata8(char data8)									// Запись данных
{

	LS020_PORT_RS &= ~(1<<LS020_RS); 							// Clear RS
	LS020_PORT_CS &= ~(1<<LS020_CS); 							// select LCD 
  	SPDR = data8;
  	while ( !(SPSR & (1 << SPIF)));
	LS020_PORT_CS |= (1<<LS020_CS); 							// deselect LCD 

}


//------------------------------------------------------------------------------------------------------
// запись данных 16 бит
void ls020_wrdata16(uint16_t data16)
{
  	ls020_wrdata8((data16>>8) & 0xFF);
  	ls020_wrdata8(data16 & 0xFF);
}


//------------------------------------------------------------------------------------------------------
// Инициализация Дисплея
void ls020_init_lcd(void)										// инициализация
{
  	LS020_DDR_RS  |= 1<<LS020_RS;
  	LS020_DDR_RST |= 1<<LS020_RST;
	LS020_DDR_CS  |= 1<<LS020_CS;

  	LS020_PORT_RS  |= 1<<LS020_RS;
  	LS020_PORT_RST |= 1<<LS020_RST;
	LS020_PORT_CS  |= 1<<LS020_CS;
			
	LS020_PORT_RST &= ~(1<<LS020_RST); 							// Pull RST pin down
//  PORTB &= ~(1<<RST); 										// Pull RST pin down
  	_delay_ms(10);

  	LS020_PORT_RST |= (1<<LS020_RST); 							// Release RST pin

  	for (unsigned char i=0; i<24; i++)
    	ls020_wrcmd8(pgm_read_byte(init_array_0+i));
  	_delay_ms(7);
  	for (unsigned char i=0; i<46; i++)
    	ls020_wrcmd8(pgm_read_byte(init_array_1+i));
}


//------------------------------------------------------------------------------------------------------
// заливка полного экрана
void fill_screen(int color, char bits_color)					//	bits_color = 8   - 8  bit mode 
{																//	bits_color = 16  - 16  bit mode 
  	uint16_t i;
  	ls020_wrcmd16(0xEF90);
  	ls020_wrcmd16(0x0500);
  	ls020_wrcmd16(0x0600);
  	ls020_wrcmd16(0x0700);

	switch (bits_color)	
		{
		case 8: 
			ls020_8bit_mode(0); 	
			color &= 0x00FF; 	
			for (i=0; i<DISP_W*DISP_H; i++)
    			ls020_wrdata8(color & 0x00FF);  		
			break;

		case 16: 
			ls020_16bit_mode(); 	
			for (i=0; i<DISP_W*DISP_H; i++)
    			ls020_wrdata16(color); 				
			break;
		}
		
	ls020_8bit_mode(0);											// set 8  bit mode
  	
}


//------------------------------------------------------------------------------------------------------
// Выбор 8-битного режима
// 0 - цветовое пространство RGB
// 1 - цветовое пространство RGB
void ls020_8bit_mode(char BGR) 									// BGR = 0 - disabled, BGR = 1 - enabled.
{
  	ls020_wrcmd16(0xE800+(BGR&0x01)*0x40);
}


// Выбор 16-битного режима
void ls020_16bit_mode(void)										// режим 16 бит
{
  	ls020_wrcmd16(0xE80F);
}


//------------------------------------------------------------------------------------------------------
// Выбор расскладки дисплея
// Direction = 0 - книжная ориентация
// заполнение точек вертикальное, инкримент вертикальной координаты
// Direction = 1 - альбомная ориентация
// заполнение точек вертикальное, инкримент горизонтальной координаты
void Set_Direction(char Direction)								
{
	ls020_wrcmd16(0xEF90);
	ls020_wrcmd16(0x0500 + Direction*0x0004);
}

//------------------------------------------------------------------------------------------------------
// Выбор частичного окна дисплея
// x1,y1 - координаты начальной точки
// x2,y2 - координаты конечной точки
void ls020_set_window(char x1, char y1, char x2,char y2, char Direction)
{	
	Set_Direction(Direction);
  	ls020_wrcmd16(0x0A00 + x1);
  	ls020_wrcmd16(0x0B00 + x2);
  	ls020_wrcmd16(0x0800 + y1);
  	ls020_wrcmd16(0x0900 + y2);
}


//------------------------------------------------------------------------------------------------------
// 0 - normal mode 						- 	книжный режим
// 1 - х-axis symmetry (mirror image) 	- 	симметрия по оси Х (относитально точки x1y1)
// 2 - y-axis symmetry (mirror image) 	- 	симметрия по оси Y (относитально точки x1y1)
// 3 - 180 degree rotation 				- 	разворот на 180 градусов (относитально точки x1y1)
// 4 - mirror image, -90 degree   		- 	разворот на 90 градусов против часовой стрелке 
//											относительно книжной ориентации (относитально точки x1y1)
//											и симметрия о координате У
// 5 - +90 degree 						- 	разворот на 90 градусов по часовой стрелке 
//											относительно книжной ориентации (относитально точки x1y1)
//											альбоная ориентация
// 6 - -90 degree 						- 	разворот на 90 градусов против часовой стрелке 
//											относительно книжной ориентации (относитально точки x1y1)
//											альбоная ориентация перевернутая
// 7 - mirror image, +90 degree 		- 	разворот на 90 градусов по часовой стрелке 
//											относительно книжной ориентации (относитально точки x1y1)
//											и симметрия о координате Х

void rotation(char x, char y, char CHARH, char CHARW, char mode)
{
/*	
	char CHARW = 8;
	char CHARH = 14;
	char x = 20;
	char y = 20;
	
	ls020_16bit_mode();
*/
	
	ls020_wrcmd16(0xEF80);
	ls020_wrcmd16(0x1800 + mode);

	switch(mode)
		{
		case  0:	
//				 	ls020_wrcmd16(0x1800);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y + (CHARW - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x + (CHARH - 1));
					break;
	
		case  1:	
//				 	ls020_wrcmd16(0x1801);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y - (CHARW - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x + (CHARH - 1));
					break;
		
		case  2:	
//				 	ls020_wrcmd16(0x1802);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y + (CHARW - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x - (CHARH - 1));
					break;
		
		case  3:	
//				 	ls020_wrcmd16(0x1803);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y - (CHARW - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x - (CHARH - 1));
					break;
		
		case  4:	
//				 	ls020_wrcmd16(0x1804);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y + (CHARH - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x + (CHARW - 1));
					break;
		
		case  5:	
//					ls020_wrcmd16(0x1805);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y - (CHARH - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x + (CHARW - 1));
					break;

		case  6:	
//					ls020_wrcmd16(0x1806);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y - (CHARH - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x - (CHARW - 1));
					break;
		
		case  7:	
//					ls020_wrcmd16(0x1807);
					ls020_wrcmd16(ASX + y);
					ls020_wrcmd16(AEX + y - (CHARH - 1));
					ls020_wrcmd16(ASY + x);
					ls020_wrcmd16(AEY + x - (CHARW - 1));
					break;
		}
}


void rotationl(char x, char y, char CHARH, char CHARW, char mode)
{	

/*	
	char CHARW = 8;
	char CHARH = 14;
	char x = 20;
	char y = 20;
*/
	
	ls020_16bit_mode();

	rotation(x, y, CHARH, CHARW, mode);




	
	for (char h=0; h < CHARH; h++) 				// every column of the picture y-direction (mode 0)
		{
		
		uint8_t ch;
		
		ch=(pgm_read_byte(font8x14+14*(0x50-32)+h));

		char mask = 0x80;
		for (char p=0; p < CHAR_W; p++) 		// write the pixels in x direction (mode 0)
			{
			if (ch & mask) 
				{
					ls020_wrdata16(pink);
				}
				else 
				{
					ls020_wrdata16(sky);
				}
			mask = mask/2;
			}		
		}

	ls020_wrcmd16(0x1800);			// нормальный режим вывода
	ls020_8bit_mode(0);


}



//------------------------------------------------------------------------------------------------------
// Вывод cимвола шрифта 8*14
// x - координата по горизонтали в режиме альбом
// у - координата по вертикали в режиме книга
// c - символ в кодировке ASCII
// rot = 1 - режим книга
// rot = 0 - режим альбом перевернутый

void put_char8x14(char x, char y, char symbol, int color, int bkcolor, char bits_color, char rot)
{
  	uint8_t h,ch,p,mask;

	rotation(x, y, 14, 8, rot);

	switch (bits_color)	
		{
		case 8:
			ls020_8bit_mode(0);
  			for (h = 0; h < CHAR_H; h++)									// every column of the character
  				{

       			ch = (pgm_read_byte(font8x14 + 14*(symbol - 32) + h));
				mask = 0x80;
        		for (p = 0; p < CHAR_W; p++)  								// write the pixels
        			{
          			if (ch & mask)
            			ls020_wrdata8(color & 0x00FF);                
          			else
            			ls020_wrdata8(bkcolor & 0x00FF);
					
					mask = mask/2;
					}        		
        		} 
			break;
	
		case 16:
			ls020_16bit_mode();
  			for (h = 0; h < CHAR_H; h++)									// every column of the character
  				{

       			ch = (pgm_read_byte(font8x14 + 14*(symbol - 32) + h));
				mask = 0x80;
        		for (p = 0; p < CHAR_W; p++)  								// write the pixels
        			{
          			if (ch & mask)
            			ls020_wrdata16(color);                
          			else
            			ls020_wrdata16(bkcolor);
          			
					mask = mask/2;
					}
				}
			break;
		} 
  	ls020_8bit_mode(0);
}

//------------------------------------------------------------------------------------------------------
// Вывод cимвола шрифта 6*8
// x - координата по горизонтали в режиме альбом
// у - координата по вертикали в режиме книга
// symbol - символ в кодировке ASCII
// color   - цвет символа 
// bkcolor - цвет фона
void ls020_put_char6x8(char x, char y, char symbol, int color, int bkcolor, char bits_color)
{	
	ls020_set_window(y, x, y + 7, x + 5, 1);
	int offset = 6*(symbol);

	switch (bits_color)	
		{
		case 8: 
			ls020_8bit_mode(0);
			for (char i = 0; i < 6 ; i++)
    			for (char j = 0; j<8; j++)
	  				if (((pgm_read_byte(font6x8 + offset + i) >> j) & 0x01) == 0x01)
	    					ls020_wrdata8(color & 0x00FF);
	  				else
	    					ls020_wrdata8(bkcolor & 0x00FF);		
			break;

		case 16: 
		 	ls020_16bit_mode();
			for (char i = 0; i < 6 ; i++)
    			for (char j = 0; j<8; j++)
	  				if (((pgm_read_byte(font6x8 + offset + i) >> j) & 0x01) == 0x01)
	    					ls020_wrdata16(color);
	  				else
	    					ls020_wrdata16(bkcolor);	
			break;
		
		}
  	ls020_8bit_mode(0);
  	
}

//------------------------------------------------------------------------------------------------------
// Вывод строки символов шрифта 6*8
// x - координата по горизонтали в режиме альбом
// у - координата по вертикали в режиме книга
// text - строка в кодировке ASCII
// color   - цвет символа 
// bkcolor - цвет фона
void ls020_put_string6x8(char x, char y, char * text, int color, int bkcolor, char bits_color)
{
  	unsigned char i=0; 
  	unsigned char x0=0;
  	while (text[i]!=0)
  		{
    	ls020_put_char6x8(x+x0,y,text[i], color,bkcolor, bits_color);
    	i++;
    	x0+=6;
  		}
}

//------------------------------------------------------------------------------------------------------
// Вывод строки символов шрифта 6*8
// x - координата по горизонтали в режиме альбом
// у - координата по вертикали в режиме книга
// text - строка в кодировке ASCII
// color   - цвет символа 
// bkcolor - цвет фона
/*
void ls020_put_string8x14(char x, char y, char * text, int color, int bkcolor, char bits_color)
{
  	unsigned char i=0; 
  	unsigned char x0=0;
  	while (text[i]!=0)
  		{
//		put_char8x14(char x, char y, char symbol, int color, int bkcolor, char bits_color, char rot)
    	ls020_put_char6x8(x+x0,y,text[i], color,bkcolor, bits_color);
    	i++;
    	x0+=6;
  		}
}
*/
//------------------------------------------------------------------------------------------------------
// Вывод прямоугольника заданных размеров и цвета
void ls020_rectangle(char x1, char y1, char x2, char y2, int color, char bits_color)
{	
	ls020_set_window(x1,y1,x2,y2,1);
	switch (bits_color)	
		{
		case 8: 
			ls020_8bit_mode(0);  
			for (char y=y1;y<=y2;y++)
    			for (char x=x1;x<=x2;x++)
    				ls020_wrdata8(color & 0x00FF);		
			break;

		case 16: 
		 	ls020_16bit_mode();
			for (char y=y1;y<=y2;y++)
    			for (char x=x1;x<=x2;x++)
    				ls020_wrdata16(color);
			break;
		
		}
  	ls020_8bit_mode(0);
}



//------------------------------------------------------------------------------------------------------
// Вывод точки заданного цвета
// bits_color = 8  - 8  bit mode
// bits_color = 16 - 16 bit mode
void put_dot(int x, int y, int color, char bits_color)						
{																				
  	ls020_wrcmd16(0xEF90);
  	ls020_wrcmd16(0x0500);
  	ls020_wrcmd16(0x0800 + x);
  	ls020_wrcmd16(0x0A00 + y);
	switch (bits_color)	
		{
		case 8:  ls020_8bit_mode(0); 	ls020_wrdata8(color & 0x00FF); 		break;
		case 16: ls020_16bit_mode(); 	ls020_wrdata16(color); 				break;
		}
		
	ls020_8bit_mode(0);															// set 8  bit mode 

}

void lcd_picture()
{
 	ls020_16bit_mode();
// 	unsigned short i;
 	ls020_wrcmd16(0xEF90);
 	ls020_wrcmd16(0x0500);
 	ls020_wrcmd16(0x0800); //x1
 	ls020_wrcmd16(0x0A00); //y1
 	ls020_wrcmd16(0x0983); //x2
 	ls020_wrcmd16(0x0Baf); //y2
 /*
 	for (i=0; i<(...); i++)
		ls020_wrdata16(pgm_read_word(array+i));
 */
 	ls020_8bit_mode(0);
}



//---------------------------------


// Строит вертикальную линию по координатам у1 - начало линии, у2 - конец линии, 
// х - положение линиии по оси х, 
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void line_vertical(char y1, char y2, char x, int color, char bits_color)
{
	ls020_set_window(x, y1, x, y2, 1);
	
	switch (bits_color)	
		{
		case 8:  
				ls020_8bit_mode(0); 	
				for( unsigned i=0; i<(y2-y1); i++)
					{;
					ls020_wrdata8(color & 0x00FF);
					}
			break;
		
		case 16: 
				ls020_16bit_mode(); 	
				for( unsigned i=0; i<(y2-y1); i++)
					{
					ls020_wrdata16(color);
					}
			break;
		}
		
	ls020_8bit_mode(0);	

}

// Строит горизонтальную линию по координатам x1 - начало линии, x2 - конец линии, 
// y - положение линиии по оси y, 
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void line_horizontal(char x1, char x2, char y, int color, char bits_color)
{

	ls020_set_window(x1, y, x2, y, 0);
	
	switch (bits_color)	
		{
		case 8:  
				ls020_8bit_mode(0); 	
				for( unsigned i=0; i<(x2-x1); i++)
					{;
					ls020_wrdata8(color & 0x00FF);
					}
			break;
		
		case 16: 
				ls020_16bit_mode(); 	
				for( unsigned i=0; i<(x2-x1); i++)
					{
					ls020_wrdata16(color);
					}
			break;
		}
		
	ls020_8bit_mode(0);	
	 
}

// Строит квадрат(прямоугольник) по двум точк незарисованный внутри
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void drawSquare(char x1, char y1, char x2, char y2, int color, char bits_color) 
{
	line_horizontal(x1, x2, y1, color, bits_color);
	line_horizontal(x1, x2, y2, color, bits_color);
	line_vertical(y1, y2, x1, color, bits_color);
	line_vertical(y1, y2, x2, color, bits_color);
}

// Строит линию через две произвольних точки
// не строит вертикальную линию
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void drawLine(int x1, int y1, int x2, int y2, int color, char bits_color) 
{
    const int deltaX = abs(x2 - x1);
    const int deltaY = abs(y2 - y1);
    const int signX = x1 < x2 ? 1 : -1;
    const int signY = y1 < y2 ? 1 : -1;
    
    int error = deltaX - deltaY;
    
	put_dot(KoordinaY0 + y2, KoordinaX0 + x2, color, bits_color);
    while(x1 != x2 || y1 != y2) {

		put_dot(KoordinaY0 + y1 ,KoordinaX0 + x1, color, bits_color);
        const int error2 = error * 2;
        
        if(error2 > -deltaY) {
            error -= deltaY;
            x1 += signX;
        }
        if(error2 < deltaX) {
            error += deltaX;
            y1 += signY;
        }
    }
 
}

// Строит круг
// radius - радиус
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void drawCircle(int x0, int y0, int radius, int color, char bits_color) 
{
        int x = 0;
        int y = radius;
        int delta = 2 - 2 * radius;
        int error = 0;
        while(y >= 0) {

				put_dot(y0 + y, x0 + x, color, bits_color);
				put_dot(y0 - y, x0 + x, color, bits_color);
				put_dot(y0 + y, x0 - x, color, bits_color);
				put_dot(y0 - y, x0 - x, color, bits_color);
                
				error = 2 * (delta + y) - 1;
                if(delta < 0 && error <= 0) 
					{
                    ++x;
                    delta += 2 * x + 1;
                    continue;
                	}
                error = 2 * (delta - x) - 1;

                if(delta > 0 && error > 0) 
					{
                    --y;
                    delta += 1 - 2 * y;
                    continue;
                	}
                ++x;
                delta += 2 * (x - y);
                --y;
        }
}
 
// Строит круг заполненный внутри
// radius - радиус
// color - цвет
// bits_color - кол-во бит цвета (8 или 16)
void drawCircleFull(int x0, int y0, int radius, int color, char bits_color) 
{
	int i;
	for (i = 0; i < radius + 1; i++)
	drawCircle(x0, y0, i, color, bits_color);

}
